# GitHub Fitness

A Progressive Web App for tracking weight training workouts. Execute AI-generated workout plans with smart logging, statistical progress analysis, and offline-first GitHub sync.

## Features

- **Smart Workout Logging**: Weight entry adapts to equipment type (barbell plates per side, dumbbells per hand, machine stack weights)
- **AI-Generated Plans**: Import JSON workout plans generated by AI assistants
- **Progress Tracking**: 1RM estimations, trend analysis with rolling averages and confidence bands
- **Rest Timer**: Auto-starting timer with audio alerts and background notifications
- **Plate Calculator**: Visual plate loading diagrams for target weights
- **Offline-First**: Full PWA support - works without internet connection
- **GitHub Sync**: Optional sync to a GitHub repository for backup and multi-device support

## Getting Started

### Prerequisites

- Node.js 18+
- npm or yarn

### Installation

```bash
# Clone the repository
git clone https://github.com/your-username/github-fitness.git
cd github-fitness

# Install dependencies
npm install

# Start development server
npm run dev
```

The app will be available at `http://localhost:5173`.

### Building for Production

```bash
npm run build
```

The built files will be in the `dist/` directory.

## Project Structure

```
src/
├── components/
│   ├── ui/              # Reusable UI components
│   ├── workout/         # Workout execution components
│   ├── plan/            # Plan import/edit components
│   ├── dashboard/       # Progress dashboard components
│   └── layout/          # App shell, navigation
├── lib/
│   ├── storage.ts       # localStorage + IndexedDB abstraction
│   ├── sync.ts          # GitHub sync logic
│   ├── calculations.ts  # Weight calc, 1RM formulas, statistics
│   └── haptics.ts       # Haptic feedback utilities
├── hooks/               # React hooks
├── pages/               # Page components
├── types/               # TypeScript interfaces
└── data/                # Default data
```

## JSON Plan Schema

Workout plans can be imported as JSON with the following structure:

```typescript
interface WorkoutPlan {
  plan_meta: {
    plan_id: string;
    plan_name: string;
    version: string;
    days_per_week: number;
    focus?: "strength" | "hypertrophy" | "powerlifting";
    author_agent?: string;
  };
  schedule: Array<{
    id: string;
    day_name: string;
    day_order: number;
    exercises: Array<{
      order: number;
      exercise_id: string;        // e.g., "bench_press_barbell"
      substitution_group: string; // Movement pattern for substitutions
      sets: number;
      target_reps: string;        // "8-10" or "5"
      target_rpe?: number;
      rest_seconds: number;
      notes?: string;
    }>;
  }>;
}
```

### Example Plan

```json
{
  "plan_meta": {
    "plan_id": "upper_lower_4day",
    "plan_name": "4-Day Upper/Lower Split",
    "version": "1.0",
    "days_per_week": 4,
    "focus": "hypertrophy"
  },
  "schedule": [
    {
      "id": "day_a",
      "day_name": "Upper A",
      "day_order": 0,
      "exercises": [
        {
          "order": 1,
          "exercise_id": "bench_press_barbell",
          "substitution_group": "horizontal_push",
          "sets": 4,
          "target_reps": "6-8",
          "target_rpe": 8,
          "rest_seconds": 180
        },
        {
          "order": 2,
          "exercise_id": "barbell_row",
          "substitution_group": "horizontal_pull",
          "sets": 4,
          "target_reps": "6-8",
          "target_rpe": 8,
          "rest_seconds": 180
        }
      ]
    }
  ]
}
```

## GitHub Sync Setup

To enable GitHub sync for backup and multi-device support:

1. Create a GitHub OAuth App:
   - Go to GitHub Settings > Developer settings > OAuth Apps
   - Set callback URL to your deployment URL + `/oauth/callback`

2. Deploy the OAuth worker (see `worker/README.md`)

3. Configure environment variables:
   ```
   VITE_GITHUB_CLIENT_ID=your_client_id
   VITE_OAUTH_PROXY_URL=https://your-worker.workers.dev
   ```

4. In the app, go to Settings > Setup GitHub Sync

## Testing

```bash
# Unit tests (watch mode)
npm run test

# Unit tests (single run)
npm run test:run

# E2E tests
npm run test:e2e

# All tests
npm run test:all
```

## Tech Stack

- **Frontend**: React 18, TypeScript, Vite
- **Styling**: Tailwind CSS
- **Charts**: Recharts
- **Storage**: IndexedDB (idb), localStorage
- **Testing**: Vitest, Playwright
- **PWA**: vite-plugin-pwa with Workbox

## License

MIT
